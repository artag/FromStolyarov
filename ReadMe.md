# Книга 1

## Linux

### ПО

Рекомендуемые оконные менеджеры:

* IceWM
* Blackbox
* Fluxbox.
* fvwm2 - (автор использует , но не рекомендует использовать читателю)

Не рекомендуется:

* GNOME
* KDE

Рекомендуемые эмуляторы терминала:

* xterm
* konsole
* Terminal

Настройки: черный цвет фона и серые буквы. Окно должно вмещать 80 символов в ширину.
Вызов терминала по hotkey.

#### Настройка терминала в Debian LXDE

1. Hotkey

```text
Параметры -> Настроить горячие клавиши
```

Для запуска lxterminal настроил Super+Z

2. Чтобы терминал запускался на весь экран

Файл `.config/openbox/lxde-rc.xml`.
Вместо:

```xml
<applications/>
```

Добавил секцию :

```xml
<applications>
    <application name='lxterminal'>
        <maximized>yes</maximized>
    </application>
</applications>
```

Я выбрал:

* Терминал LXTerminal (в LXDE)
* Шрифт Monospace Regular 14
* Тема Solarized Light

### ПО (продолжение)

Остальные программы: браузер (автор использует palemoon), LibreOffice, atril (pdf reader),
eog (просмотр изображений), mplayer, vlc.

Редакторы текстов:

* vim
* joe
* nano

У меня вместо:

* `atril` стоит `Okular`
* `eog` стоит `gpicview`

### Для программирования

* Компилятор Free Pascal - `fpc` или `fp-compiler`. Интегрированную среду не ставить.
* Ассемблер NASM - `nasm`.
* Компилятор Си и Си++ - `gcc`.
* Система сборки `make`.
* Отладчик `gdb`.

### 1.2.5. Дерево каталогов. Работа с файлами

Переключение на текстовую консоль - Ctrl+Alt+F1.

Переключение в оболочку X Window - Alt-F7, Alt-F8, Alt-F9.

* `~` - домашний каталог пользователя
* `$` - работа происходит под простым пользователем
* `#` - работа происходит под root

Простой пользователь `avst`, компьютер `host`, домашний каталог:

```text
avst@host:~$
```

Пользователь зашел в подкаталог `work`:

```text
avst@host:~/work$
```

Скрытые файлы начинаются с точки.

* `pwd` - узнать путь текущего каталога

* `ls` - вывести файлы в текущем каталоге
  * `-a` - увидеть все файлы, включая скрытые
  * `F` - различать файлы по типам (выделяет каталоги, файлы)

```text
ls -a
ls -aF
```

* `cd` - перейти в другой кааталог

```text
cd ..
cd /
```

`/` - корневой каталог

Команда `cd` без указания каталога делает текущим домашний каталог пользователя.

Пример. Относительные пути:

```bash
/home/vasya/photos/mars.jpg
Если текущий каталог /home/vasya/photos:    - относительное имя файла mars.jpg
Если текущий каталог /home/anya/work/progs  - относительное имя будет ../../../vasya/photos/mars.jpg
```

**Совет по именованию файлов**:

* не использовать русские буквы, пробелы, знаки препинания
* можно использовать точки, подчеркивание, минус (но не начинать с него имя файла)

#### Команды для работы с файлами

|Команда  | Описание                                                    |
|---------|-------------------------------------------------------------|
| `cp`    | копирование файла                                           |
| `mv`    | переименование или перемещение файла                        |
| `rm`    | удаление файла                                              |
| `mkdir` | создание директории                                         |
| `rmdir` | удаление директории                                         |
| `touch` | создание файла или установка нового времени модификациии    |
| `less`  | просмотр содержимого файла с пейджингом                     |

```text
cp file1.txt file2.txt      - копия файла file1.txt под именем file2.txt
rm oldfile                  - удалит файл oldfile
rm -r the_dir               - удалит каталог вместе с его содержимым
```

Пример копирования с флешки:

```text
cd Photoalbum/2015
mkdir Paris
cd Paris
mount /mnt/flash
cp /mnt/flash/dcim/* .
umount /mnt/flash
```

Пример *скрипта* `getphotos`:

```bash
#!bin/sh
DIR=Photoalbum/2015
[ "$1" = "" ] && { echo "No dir name"; exit 1; }
mkdir $DIR/$1
mount /mnt/flash
cp /mnt/flash/dcim/* $DIR/$1
umount /mnt/flash
```

Использование скрипта:

```text
./getphotos Milan
```

### 1.2.6. Команда и ее параметры

Первой идет команда, затем, через пробелы, ее аргументы.

Количество пробелов между аргументами не важно.

Последовательное выполнение команд. Разделение при помощи `;`:

```text
ls -a ; pwd ; echo abrakadabra

или так

ls -a;pwd;echo abrakadabra
```

Три способа **экранировать** символы (лишение символа его особой роли):

1. Символ косой черты (`\`)
2. Двойные кавычки (`""`)
3. Апострофы (`''`)

Пример, переименование каталога, содержащего пробелы:

```text
mv Photos\ from\ Paris Photos_from_Paris
mv 'Photos from Paris' Photos_from_Paris
mv "Photos from Paris" Photos_from_Paris
```

Пример, использование символов `'`, `"`, `\`:

```text
echo I\'m fine "I'm fine"
// Вывод: I'm fine I'm fine

echo "\"" "\\"
// Вывод: " \
```

`""` или `''` - *пустое слово*

### 1.2.7. Шаблоны имен файлов

* `?` - один произвольный символ
* `*` - произвольный набор символов (даже пустой)
* `[]` - любой символ из заданного множества
* `[!]` - любой символ кроме перечисленного из множества
* `{}` - любая последовательность из множества

Примеры шаблонов:

|Символы        | Значение                                           |
|---------------|--------------------------------------------------  |
|`*`            | все файлы в текущей диектории                      |
|`???*`         | все файлы, содержащие не менее 3 символов          |
|`???`          | все файлы ровно из 3 символов                      |
|`*.txt`        | все файлы с суффиксом `.txt`                       |
|`img_????.jpg  | файлы вида `img_2578.jpg`, `img_cool.jpg`          |

Пример применения шаблонов в командах:

```text
rm *~             - удаление всех файлов в текущей директории с окончанием ~
ls /etc/*.conf          - показ файлов с суффиксом .conf в директории /etc
cp files/* /mnt/flash   - скопирует все файлы из поддиректории files в /mnt/flash
echo *    - печать файлов в текущей директории
```

#### Заданные множества

* Шаблон `img_27[234][0123456789].jpg` соответствует

  * `img_2720.jpg`
  * `img_2721.jpg`
  * ...
  * `img_2734.jpg`
  * ...
  * `img_2749.jpg`

* Шаблон `img_27[234]?.jpg`

  * Как в предыдущем шаблоне, только 4 символ может быть любым

* Шаблон `[!_]*.c`

  * любые имена файлов с суффиксом `.c`, но не начинающиеся с `_`.

* Шаблон `*.{jpg,p6ng,gif}`

  * все файлы текущей директории с суффиксами `.jpg`, `.png` или `.gif`

### 1.2.8. История команд и автодополнение

* `Tab` - автодополнение
* `Up`, `Down` - перемещение по предыдущим введенным командам
* `history` - показать всю историю команд
  * `history | less` - постраничный показ всей истории команд

* `!<номер_команды>` - повторить команду с номером (номер команды из `history`)
  * `!!` - повторить последнюю введенную команду
  * `!:0`, `!:1` - извлечь отдельные слова из последней команды и выполнить команду из извлеченного слова.
  * `!137:2` - извлечь третье слово из команды 137 и выполнить команду из извлеченного слова.
  * `!abc` - последняя команда, начинающаяся со слов `abc` + здесь также можно извлечь отдельные слова

* `Ctrl+C` - сбросить вводимую строку
* `Ctrl+R` - поиск по подстроке ранее введенных команд. Повторные нажатия `Ctrl+R` выводят еще более старые команды.

### 1.2.9. Управление потоком задач

* `Ctrl+D`
  * прерывание потока ввода (аналог ситуации конца файла)
  * закрытие терминала (завершение сеанса работы в терминале).

* `Ctrl+C` - принудительное завершение активной программы

* `Ctrl+\` - принудительное завершение активной программы. Может появиться файл вида `*.core` (его можно удалить).

* `Ctrl+Z` - приостановка вывода (приостановка "прокрутки" экрана).

* `Ctrl+Q` - продолжение вывода (продолжение "прокрутки" экрана).

**Процесс** - запущенная программа в системе.

